/*
 * Copyright (c) 2019 Marco Lizza (marco.lizza@gmail.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 **/

#include "palettes.h"

#include <strings.h>

typedef struct _Predefined_Palette_t {
    const char *id;
    GL_Palette_t palette;
} Predefined_Palette_t;

static const Predefined_Palette_t _palettes[] = {
    { "gameboy", {
        {
            { 8, 24, 32, 255 },
            { 52, 104, 86, 255 },
            { 136, 192, 112, 255 },
            { 224, 248, 208, 255 }
        }, 4 }
    },
    { "gameboy-bw", {
        {
            { 0, 0, 0, 255 },
            { 103, 103, 103, 255 },
            { 182, 182, 182, 255 },
            { 255, 255, 255, 255 }
        }, 4 }
    },
    { "3-bit-rgb", {
        {
            { 0, 0, 0, 255 },
            { 255, 0, 0, 255 },
            { 0, 255, 0, 255 },
            { 0, 0, 255, 255 },
            { 0, 255, 255, 255 },
            { 255, 0, 255, 255 },
            { 255, 255, 0, 255 },
            { 255, 255, 255, 255 }
        }, 8 }
    },
    { "arne-8", {
        {
            { 0, 0, 0, 255 },
            { 204, 53, 0, 255 },
            { 94, 200, 9, 255 },
            { 29, 40, 111, 255 },
            { 0, 196, 255, 255 },
            { 142, 142, 142, 255 },
            { 255, 224, 82, 255 },
            { 255, 255, 255, 255 }
        }, 8 }
    },
    { "dawnbringer-8", {
        {
            { 0, 0, 0, 255 },
            { 85, 65, 95, 255 },
            { 100, 105, 100, 255 },
            { 215, 115, 85, 255 },
            { 80, 140, 215, 255 },
            { 100, 185, 100, 255 },
            { 230, 200, 110, 255 },
            { 220, 245, 255, 255 }
        }, 8 }
    },
    { "pico-8", {
        {
            { 0, 0, 0, 255 },
            { 95, 87, 79, 255 },
            { 194, 195, 199, 255 },
            { 255, 241, 232, 255 },
            { 255, 236, 39, 255 },
            { 255, 163, 0, 255 },
            { 255, 204, 170, 255 },
            { 171, 82, 54, 255 },
            { 255, 119, 168, 255 },
            { 255, 0, 77, 255 },
            { 131, 118, 156, 255 },
            { 126, 37, 83, 255 },
            { 41, 173, 255, 255 },
            { 29, 43, 83, 255 },
            { 0, 135, 81, 255 },
            { 0, 228, 54, 255 }
        }, 16 }
    },
    { "arne-16", {
        {
            { 0, 0, 0, 255 },
            { 73, 60, 43, 255 },
            { 190, 38, 51, 255 },
            { 224, 111, 139, 255 },
            { 157, 157, 157, 255 },
            { 164, 100, 34, 255 },
            { 235, 137, 49, 255 },
            { 247, 226, 107, 255 },
            { 255, 255, 255, 255 },
            { 27, 38, 50, 255 },
            { 47, 72, 78, 255 },
            { 68, 137, 26, 255 },
            { 163, 206, 39, 255 },
            { 0, 87, 132, 255 },
            { 49, 162, 242, 255 },
            { 178, 220, 239, 255 }
        }, 16 }
    },
    { "dawnbringer-16", {
        {
            { 20, 12, 28, 255 },
            { 68, 36, 52, 255 },
            { 48, 52, 109, 255 },
            { 78, 74, 78, 255 },
            { 133, 76, 48, 255 },
            { 52, 101, 36, 255 },
            { 208, 70, 72, 255 },
            { 117, 113, 97, 255 },
            { 89, 125, 206, 255 },
            { 210, 125, 44, 255 },
            { 133, 149, 161, 255 },
            { 109, 170, 44, 255 },
            { 210, 170, 153, 255 },
            { 109, 194, 202, 255 },
            { 218, 212, 94, 255 },
            { 222, 238, 214, 255 }
        }, 16 }
    },
    { "cga", {
        {
            { 0, 0, 0, 255 },
            { 85, 85, 85, 255 },
            { 170, 170, 170, 255 },
            { 255, 255, 255, 255 },
            { 0, 0, 170, 255 },
            { 85, 85, 255, 255 },
            { 0, 170, 0, 255 },
            { 85, 255, 85, 255 },
            { 0, 170, 170, 255 },
            { 85, 255, 255, 255 },
            { 170, 0, 0, 255 },
            { 255, 85, 85, 255 },
            { 170, 0, 170, 255 },
            { 255, 85, 255, 255 },
            { 170, 85, 0, 255 },
            { 255, 255, 85, 255 }
        }, 16 }
    },
    { "c64", {
        {
            { 0, 0, 0, 255 },
            { 98, 98, 98, 255 },
            { 137, 137, 137, 255 },
            { 173, 173, 173, 255 },
            { 255, 255, 255, 255 },
            { 159, 78, 68, 255 },
            { 203, 126, 117, 255 },
            { 109, 84, 18, 255 },
            { 161, 104, 60, 255 },
            { 201, 212, 135, 255 },
            { 154, 226, 155, 255 },
            { 92, 171, 94, 255 },
            { 106, 191, 198, 255 },
            { 136, 126, 203, 255 },
            { 80, 69, 155, 255 },
            { 160, 87, 163, 255 }
        }, 16 }
    },
    { "arne-32", {
        {
            { 0, 0, 0, 255 },
            { 73, 60, 43, 255 },
            { 190, 38, 51, 255 },
            { 224, 111, 139, 255 },
            { 164, 100, 34, 255 },
            { 235, 137, 49, 255 },
            { 247, 226, 107, 255 },
            { 255, 255, 255, 255 },
            { 157, 157, 157, 255 },
            { 47, 72, 78, 255 },
            { 27, 38, 50, 255 },
            { 68, 137, 26, 255 },
            { 163, 206, 39, 255 },
            { 0, 87, 132, 255 },
            { 49, 162, 242, 255 },
            { 178, 220, 239, 255 },
            { 52, 42, 151, 255 },
            { 101, 109, 113, 255 },
            { 204, 204, 204, 255 },
            { 115, 41, 48, 255 },
            { 203, 67, 167, 255 },
            { 82, 79, 64, 255 },
            { 173, 157, 51, 255 },
            { 236, 71, 0, 255 },
            { 250, 180, 11, 255 },
            { 17, 94, 51, 255 },
            { 20, 128, 126, 255 },
            { 21, 194, 165, 255 },
            { 34, 90, 246, 255 },
            { 153, 100, 249, 255 },
            { 247, 142, 214, 255 },
            { 244, 185, 144, 255 }
        }, 32 }
    },
    { "dawnbringer-32", {
        {
            { 0, 0, 0, 255 },
            { 34, 32, 52, 255 },
            { 69, 40, 60, 255 },
            { 102, 57, 49, 255 },
            { 143, 86, 59, 255 },
            { 223, 113, 38, 255 },
            { 217, 160, 102, 255 },
            { 238, 195, 154, 255 },
            { 251, 242, 54, 255 },
            { 153, 229, 80, 255 },
            { 106, 190, 48, 255 },
            { 55, 148, 110, 255 },
            { 75, 105, 47, 255 },
            { 82, 75, 36, 255 },
            { 50, 60, 57, 255 },
            { 63, 63, 116, 255 },
            { 48, 96, 130, 255 },
            { 91, 110, 225, 255 },
            { 99, 155, 255, 255 },
            { 95, 205, 228, 255 },
            { 203, 219, 252, 255 },
            { 255, 255, 255, 255 },
            { 155, 173, 183, 255 },
            { 132, 126, 135, 255 },
            { 105, 106, 106, 255 },
            { 89, 86, 82, 255 },
            { 118, 66, 138, 255 },
            { 172, 50, 50, 255 },
            { 217, 87, 99, 255 },
            { 215, 123, 186, 255 },
            { 143, 151, 74, 255 },
            { 138, 111, 48, 255 }
        }, 32 }
    },
    { "6-bit-rgb", {
        {
            { 0, 0, 0, 255 },
            { 0, 0, 85, 255 },
            { 0, 0, 170, 255 },
            { 0, 0, 255, 255 },
            { 85, 0, 0, 255 },
            { 85, 0, 85, 255 },
            { 85, 0, 170, 255 },
            { 85, 0, 255, 255 },
            { 170, 0, 0, 255 },
            { 170, 0, 85, 255 },
            { 170, 0, 170, 255 },
            { 170, 0, 255, 255 },
            { 255, 0, 0, 255 },
            { 255, 0, 85, 255 },
            { 255, 0, 170, 255 },
            { 255, 0, 255, 255 },
            { 0, 85, 0, 255 },
            { 0, 85, 85, 255 },
            { 0, 85, 170, 255 },
            { 0, 85, 255, 255 },
            { 85, 85, 0, 255 },
            { 85, 85, 85, 255 },
            { 85, 85, 170, 255 },
            { 85, 85, 255, 255 },
            { 170, 85, 0, 255 },
            { 170, 85, 85, 255 },
            { 170, 85, 170, 255 },
            { 170, 85, 255, 255 },
            { 255, 85, 0, 255 },
            { 255, 85, 85, 255 },
            { 255, 85, 170, 255 },
            { 255, 85, 255, 255 },
            { 0, 170, 0, 255 },
            { 0, 170, 85, 255 },
            { 0, 170, 170, 255 },
            { 0, 170, 255, 255 },
            { 85, 170, 0, 255 },
            { 85, 170, 85, 255 },
            { 85, 170, 170, 255 },
            { 85, 170, 255, 255 },
            { 170, 170, 0, 255 },
            { 170, 170, 85, 255 },
            { 170, 170, 170, 255 },
            { 170, 170, 255, 255 },
            { 255, 170, 0, 255 },
            { 255, 170, 85, 255 },
            { 255, 170, 170, 255 },
            { 255, 170, 255, 255 },
            { 0, 255, 0, 255 },
            { 0, 255, 85, 255 },
            { 0, 255, 170, 255 },
            { 0, 255, 255, 255 },
            { 85, 255, 0, 255 },
            { 85, 255, 85, 255 },
            { 85, 255, 170, 255 },
            { 85, 255, 255, 255 },
            { 170, 255, 0, 255 },
            { 170, 255, 85, 255 },
            { 170, 255, 170, 255 },
            { 170, 255, 255, 255 },
            { 255, 255, 0, 255 },
            { 255, 255, 85, 255 },
            { 255, 255, 170, 255 },
            { 255, 255, 255, 255 },
        }, 64 }
    },
    { "nes", {
        {
            { 124, 124, 124, 255 },
            { 0, 0, 252, 255 },
            { 0, 0, 188, 255 },
            { 68, 40, 188, 255 },
            { 148, 0, 132, 255 },
            { 168, 0, 32, 255 },
            { 168, 16, 0, 255 },
            { 136, 20, 0, 255 },
            { 80, 48, 0, 255 },
            { 0, 120, 0, 255 },
            { 0, 104, 0, 255 },
            { 0, 88, 0, 255 },
            { 0, 64, 88, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 },
            { 188, 188, 188, 255 },
            { 0, 120, 248, 255 },
            { 0, 88, 248, 255 },
            { 104, 68, 252, 255 },
            { 216, 0, 204, 255 },
            { 228, 0, 88, 255 },
            { 248, 56, 0, 255 },
            { 228, 92, 16, 255 },
            { 172, 124, 0, 255 },
            { 0, 184, 0, 255 },
            { 0, 168, 0, 255 },
            { 0, 168, 68, 255 },
            { 0, 136, 136, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 },
            { 248, 248, 248, 255 },
            { 60, 188, 252, 255 },
            { 104, 136, 252, 255 },
            { 152, 120, 248, 255 },
            { 248, 120, 248, 255 },
            { 248, 88, 152, 255 },
            { 248, 120, 88, 255 },
            { 252, 160, 68, 255 },
            { 248, 184, 0, 255 },
            { 184, 248, 24, 255 },
            { 88, 216, 84, 255 },
            { 88, 248, 152, 255 },
            { 0, 232, 216, 255 },
            { 120, 120, 120, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 },
            { 252, 252, 252, 255 },
            { 164, 228, 252, 255 },
            { 184, 184, 248, 255 },
            { 216, 184, 248, 255 },
            { 248, 184, 248, 255 },
            { 248, 164, 192, 255 },
            { 240, 208, 176, 255 },
            { 252, 224, 168, 255 },
            { 248, 216, 120, 255 },
            { 216, 248, 120, 255 },
            { 184, 248, 184, 255 },
            { 184, 248, 216, 255 },
            { 0, 252, 252, 255 },
            { 248, 216, 248, 255 },
            { 0, 0, 0, 255 },
            { 0, 0, 0, 255 }
    }, 64 }
    },
    { NULL, { {}, 0 } }
};

const GL_Palette_t *graphics_palettes_find(const char *id)
{
    for (size_t i = 0; _palettes[i].id != NULL; ++i) {
        if (strcasecmp(_palettes[i].id, id) == 0) {
            return &_palettes[i].palette;
        }
    }
    return NULL;
}